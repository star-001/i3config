jQuery.fn.extend({everyTime:function(a,b,c,d){return this.each(function(){jQuery.timer.add(this,a,b,c,d)})},oneTime:function(a,b,c){return this.each(function(){jQuery.timer.add(this,a,b,c,1)})},stopTime:function(a,b){return this.each(function(){jQuery.timer.remove(this,a,b)})}}),jQuery.extend({timer:{global:[],guid:1,dataKey:"jQuery.timer",regex:/^([0-9]+(?:\.[0-9]*)?)\s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1e3,das:1e4,hs:1e5,ks:1e6},timeParse:function(a){if(void 0==a||null==a)return null;var b=this.regex.exec(jQuery.trim(a.toString()));if(b[2]){var c=parseFloat(b[1]),d=this.powers[b[2]]||1;return c*d}return a},add:function(a,b,c,d,e){var f=0;if(jQuery.isFunction(c)&&(e||(e=d),d=c,c=b),b=jQuery.timer.timeParse(b),!("number"!=typeof b||isNaN(b)||0>b)){("number"!=typeof e||isNaN(e)||0>e)&&(e=0),e=e||0;var g=jQuery.data(a,this.dataKey)||jQuery.data(a,this.dataKey,{});g[c]||(g[c]={}),d.timerID=d.timerID||this.guid++;var h=function(){(++f>e&&0!==e||d.call(a,f)===!1)&&jQuery.timer.remove(a,c,d)};h.timerID=d.timerID,g[c][d.timerID]||(g[c][d.timerID]=window.setInterval(h,b)),this.global.push(a)}},remove:function(a,b,c){var d,e=jQuery.data(a,this.dataKey);if(e){if(b){if(e[b]){if(c)c.timerID&&(window.clearInterval(e[b][c.timerID]),delete e[b][c.timerID]);else for(var c in e[b])window.clearInterval(e[b][c]),delete e[b][c];for(d in e[b])break;d||(d=null,delete e[b])}}else for(b in e)this.remove(a,b,c);for(d in e)break;d||jQuery.removeData(a,this.dataKey)}}}}),jQuery(window).bind("unload",function(){jQuery.each(jQuery.timer.global,function(a,b){jQuery.timer.remove(b)})});