define(function(require,exports){var a=require("dao/taskdb").db,b=require("service/notify"),c=require("utils/timeformat"),d=require("service/prefs");exports.start=function(){var e=this;$(document).everyTime(1e3,"remind_timer",function(f){if(d.get("notificationEnabled")){var g=a.getOnTimeTasks();if(g.length){var h=c.prefMoment().format("HH:mm");if(h===e.lastTime)return;e.lastTime=h,_.each(g,function(a){b.notify(a)})}}})},exports.restart=function(){this.stop(),this.start()},exports.stop=function(){$(document).stopTime("remind_timer")}});