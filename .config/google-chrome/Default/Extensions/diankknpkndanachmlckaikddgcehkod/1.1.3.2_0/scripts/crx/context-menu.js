define(function(require,exports){var a,b=require("configs/settings"),c=require("crx/domain"),d=require("crx/user"),e=require("utils/analytics"),f={};exports.render=function(){d.getUser(function(a){a.logined&&(f.action="showProject"),f.domain=a.domain,f.showMeridiem=a.showMeridiem,f.startDayOfWeek=a.startDayOfWeek,f.lunarEnabled=!1,exports.sendMsgToContext()})},exports.nologin=function(){f.action="noLogin",f.domain=b.domain,exports.sendMsgToContext()},exports.sendMsgToContext=function(){root.tabs.sendMessage(f.tab.id,f,function(a){})},exports.genericOnClick=function(a,b){f.info=a,f.tab=b,f.info.pageUrl=f.info.pageUrl||f.tab.url,c.initInfoFromServer(exports.render,exports.nologin),e.report("chromeExtension","rightAdd")},exports.createMenu=function(){var c=b.isCnSites?"添加到滴答清单":"Add To TickTick";a=root.contextMenus.create({title:c,contexts:["all"],onclick:exports.genericOnClick})},exports.updateMenu=function(){var c=b.isCnSites?"添加到滴答清单":"Add To TickTick";root.contextMenus.update(a,{title:c},function(a){})},exports.initMenus=function(){exports.createMenu()}});