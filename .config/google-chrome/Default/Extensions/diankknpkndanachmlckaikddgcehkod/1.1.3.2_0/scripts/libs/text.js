define(["module"],function(module){"use strict";var a,b,c,d,e,f=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],g=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,h=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,i="undefined"!=typeof location&&location.href,j=i&&location.protocol&&location.protocol.replace(/\:/,""),k=i&&location.hostname,l=i&&(location.port||void 0),m={},n=module.config&&module.config()||{};return a={version:"2.0.10",strip:function(a){if(a){a=a.replace(g,"");var b=a.match(h);b&&(a=b[1])}else a="";return a},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:n.createXhr||function(){var a,b,c;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(b=0;3>b;b+=1){c=f[b];try{a=new ActiveXObject(c)}catch(d){}if(a){f=[c];break}}return a},parseName:function(a){var b,c,d,e=!1,f=a.indexOf("."),g=0===a.indexOf("./")||0===a.indexOf("../");return-1!==f&&(!g||f>1)?(b=a.substring(0,f),c=a.substring(f+1,a.length)):b=a,d=c||b,f=d.indexOf("!"),-1!==f&&(e="strip"===d.substring(f+1),d=d.substring(0,f),c?c=d:b=d),{moduleName:b,ext:c,strip:e}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(b,c,d,e){var f,g,h,i=a.xdRegExp.exec(b);return i?(f=i[2],g=i[3],g=g.split(":"),h=g[1],g=g[0],!(f&&f!==c||g&&g.toLowerCase()!==d.toLowerCase()||(h||g)&&h!==e)):!0},finishLoad:function(b,c,d,e){d=c?a.strip(d):d,n.isBuild&&(m[b]=d),e(d)},load:function(b,c,d,e){if(e.isBuild&&!e.inlineText)return void d();n.isBuild=e.isBuild;var f=a.parseName(b),g=f.moduleName+(f.ext?"."+f.ext:""),h=c.toUrl(g),m=n.useXhr||a.useXhr;return 0===h.indexOf("empty:")?void d():void(!i||m(h,j,k,l)?a.get(h,function(c){a.finishLoad(b,f.strip,c,d)},function(a){d.error&&d.error(a)}):c([g],function(b){a.finishLoad(f.moduleName+"."+f.ext,f.strip,b,d)}))},write:function(b,c,d,e){if(m.hasOwnProperty(c)){var f=a.jsEscape(m[c]);d.asModule(b+"!"+c,"define(function () { return '"+f+"';});\n")}},writeFile:function(b,c,d,e,f){var g=a.parseName(c),h=g.ext?"."+g.ext:"",i=g.moduleName+h,j=d.toUrl(g.moduleName+h)+".js";a.load(i,d,function(c){var d=function(a){return e(j,a)};d.asModule=function(a,b){return e.asModule(a,j,b)},a.write(b,i,d,f)},f)}},"node"===n.env||!n.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(b=require.nodeRequire("fs"),a.get=function(a,c,d){try{var e=b.readFileSync(a,"utf8");0===e.indexOf("\ufeff")&&(e=e.substring(1)),c(e)}catch(f){d(f)}}):"xhr"===n.env||!n.env&&a.createXhr()?a.get=function(b,c,d,e){var f,g=a.createXhr();if(g.open("GET",b,!0),e)for(f in e)e.hasOwnProperty(f)&&g.setRequestHeader(f.toLowerCase(),e[f]);n.onXhr&&n.onXhr(g,b),g.onreadystatechange=function(a){var e,f;4===g.readyState&&(e=g.status,e>399&&600>e?(f=new Error(b+" HTTP status: "+e),f.xhr=g,d(f)):c(g.responseText),n.onXhrComplete&&n.onXhrComplete(g,b))},g.send(null)}:"rhino"===n.env||!n.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?a.get=function(a,b){var c,d,e="utf-8",f=new java.io.File(a),g=java.lang.System.getProperty("line.separator"),h=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(f),e)),i="";try{for(c=new java.lang.StringBuffer,d=h.readLine(),d&&d.length()&&65279===d.charAt(0)&&(d=d.substring(1)),null!==d&&c.append(d);null!==(d=h.readLine());)c.append(g),c.append(d);i=String(c.toString())}finally{h.close()}b(i)}:("xpconnect"===n.env||!n.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(c=Components.classes,d=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),e="@mozilla.org/windows-registry-key;1"in c,a.get=function(a,b){var f,g,h,i={};e&&(a=a.replace(/\//g,"\\")),h=new FileUtils.File(a);try{f=c["@mozilla.org/network/file-input-stream;1"].createInstance(d.nsIFileInputStream),f.init(h,1,0,!1),g=c["@mozilla.org/intl/converter-input-stream;1"].createInstance(d.nsIConverterInputStream),g.init(f,"utf-8",f.available(),d.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),g.readString(f.available(),i),g.close(),f.close(),b(i.value)}catch(j){throw new Error((h&&h.path||"")+": "+j)}}),a});